function ParagonFile(){"use strict"}ParagonFile.prototype={fileInit:{},arrFileInfo:{},delFileInfo:[]};var paragonFile=new ParagonFile;(function(a){"use strict";var b=function(){var b=function(b){var c=0,d=a.arrFileInfo[b].infos;$(d).each(function(a,b){c+=Math.ceil(b.fileSize/1024)}),$("#file_size_"+b).text(c)},c=function(b){a.arrFileInfo.hasOwnProperty(b)&&(0<a.arrFileInfo[b].infos.length?$("#file_notice_"+b).hide():$("#file_notice_"+b).show())},d=function(a,b,c,d,e){$("#file_Element_"+a);var f="";f+="<li id='"+b+"' class='file_Element_"+a+"' >",f+="\t\t<input type='hidden' name='atchUid'  value='"+b+"' >",f+="<i class='fa fa-times' style='color:red;' onclick='paragonFile.deleteFile(\""+a+"\",\""+b+"\");'></i>&nbsp;"+c+" / "+d+e+" ",f+="</li>",$("ul",".file_Element_"+a).append(f)},f=function(e,f){var g=a.fileInit[f],h=g.maxFileSize,j=g.maxFileCount,k=g.fileFilter,l=g.fileRFilter,m=k.toUpperCase().split(";"),n=l.toUpperCase().split(";");if(null!=e){var o=e.length;if(a.arrFileInfo[f].files&&(o+=a.arrFileInfo[f].files.length),j<o)return alert(paragonCmm.getLang("M.\uCCA8\uBD80\uAC2F\uC218_\uCD08\uACFC","'"+j+"'")),!1;var p=[],q=[],r=$("input:hidden[name='_attachFileTpCd']","#fileArea_"+f).val(),s=$("input:hidden[name='_attachFileRelUid']","#fileArea_"+f).val(),t={};if(a.arrFileInfo.hasOwnProperty(f)){var u=a.arrFileInfo[f].files;$(u).each(function(a,b){q.push(b)});var v=a.arrFileInfo[f].infos;$(v).each(function(a,b){p.push(b)})}for(var w=0;w<e.length;w++){var x=e[w].name,y=e[w].size,z=x.split("."),A=z[z.length-1];if(2>z.length){alert(paragonCmm.getLang("M.\uB4F1\uB85D_\uBD88\uAC00_\uD655\uC7A5\uC790"));break}var y=e[w].size/1024,B="KB";if(1024<y&&(y/=1024,B="MB"),-1<y.toString().indexOf(".")&&2<y.toString().split(".")[1].length&&(y=y.toFixed(2)),null!=n&&""!=n&&0<=$.inArray(A.toUpperCase(),n)){alert(paragonCmm.getLang("M.\uB4F1\uB85D_\uBD88\uAC00_\uD655\uC7A5\uC790"));break}if(null!=m&&""!=m&&0>$.inArray(A.toUpperCase(),m)){alert(paragonCmm.getLang("M.\uB4F1\uB85D_\uBD88\uAC00_\uD655\uC7A5\uC790"));break}var C=!1;if($(q).each(function(a,b){if(b.name==e[w].name)return console.log(b.name+":"+e[w].name),console.log("\uC911\uBCF5:"+x),C=!0,!1}),!C){var D=paragonCmm.getRandomUUID(),E={};E.isNew="true",E.ctrlUuid=f,E.fileTpCd=r,E.relUid=s,E.atchUid=D;var F=new Uint32Array(10);crypto.getRandomValues(F);var G=F[1];E.saveFileName=paragonCmm.getDateFormat("yyyyMMddhhmmss")+"."+G%10+1+"."+w,E.fileName=x,E.fileSize=e[w].size,e[w].atchUid=D,p.push(E),q.push(e[w]),d(f,D,x,y,B)}}t.files=q,t.infos=p,a.arrFileInfo[f]=t,b(f)}else alert("ERROR");c(f)};return{addFileEvent:function(d,e){a.fileInit[d]=e,e.hasOwnProperty("defaultFile")&&(a.arrFileInfo[d]={infos:e.defaultFile},c(d),b(d)),$("#file_search_"+d).change(function(a){var b=a.originalEvent.target.files;f(b,d)});var g=$(".file_Element_"+d);g.off(),g.on("dragenter",function(a){a.stopPropagation(),a.preventDefault(),$("DIV.file_Element_"+d).css("border","2px solid #5272A0")}),g.on("dragleave",function(a){a.stopPropagation(),a.preventDefault(),$("DIV.file_Element_"+d).css("border","2px dotted #8296C2")}),g.on("dragover",function(a){a.stopPropagation(),a.preventDefault()}),g.on("drop",function(a){a.preventDefault();var b=a.originalEvent.dataTransfer.files;if(!(1>b.length)){var c=a.originalEvent.target,d=$(c).attr("class").replace("file_Element_","");f(b,d),$("DIV.file_Element_"+d).css("border","2px dotted #8296C2")}})},addFile:d,setFileSize:b,setNoticeView:c,deleteFile:function(d,e){$("#"+e,$("#ul_file_list_"+d)).remove();var f=a.arrFileInfo[d].files,g=[];$(f).each(function(a,b){return!(b.atchUid!==e)||void g.push(b)}),a.arrFileInfo[d].files=g;var h=a.arrFileInfo[d].infos,j=[],k=!1;$(h).each(function(a,b){return"link"===b.isNew&&(k=!0),b.atchUid===e||void j.push(b)}),a.arrFileInfo[d].infos=j,k||a.delFileInfo.push(e),c(d),b(d),$("#file_search_"+d).val("")},fileMultiUpload:f}}();a.addFileEvent=b.addFileEvent,a.addFile=b.addFile,a.setFileSize=b.setFileSize,a.setNoticeView=b.setNoticeView,a.deleteFile=b.deleteFile,a.fileMultiUpload=b.fileMultiUpload})(paragonFile);